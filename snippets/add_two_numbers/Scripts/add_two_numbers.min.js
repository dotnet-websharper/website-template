import { Start as eM } from "./WebSharper.Core.JavaScript/Runtime.js"
import { Lazy as eN, Create as eO, GetOptional as eP, SetOptional as eQ, OnLoad as eR } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(eS){ return"Dispose"in eS;}
function b(){ const eS=d.Create_1(1);const eT=d.Create_1(1);const eU=S.Element("div", [U.Create("class", "container")], [S.Element("p", [], [S.TextNode("x "), S.IntInputUnchecked([], eS)]), S.Element("p", [], [S.TextNode("y "), S.IntInputUnchecked([], eT)]), S.Element("p", [], [S.TextView(i((eV, eW) =>"x + y = "+String(eV+eW), eS.View, eT.View))])]);F("");S.RunById("main", eU);}
class c { Equals(eS){ return this===eS;} GetHashCode(){ return -1;} }
let d=eN((eS) => class eT extends c { static { d=eS(this);} static Create_1(eU){ return new p(false, {s:Y(eU, [])}, eU);} static { } });
function e(eS){ throw new Error(eS);}
function f(eS){ return[eS.K, eS.V];}
function g(eS, eT){ const eU=1+eT-eS;return eU<=0?[]:bN(eU, (eV) => eV+eS);}
class h extends c { }
function i(eS, eT, eU){ return j(() => q(eS, eT(), eU()));}
function j(eS){ const eT={c:null, o:eS};return() => { let eU=eT.c;if(eU===null){ eU=eT.o();eT.c=eU;const eV=eU.s;if(eV!=null&&eV.$==0)eT.o=null;else r(eU, () => { eT.c=null;});return eU;} else return eU;};}
function k(eS){ const eT={s:Z(eS)};return() => eT;}
function l(eS, eT){ return j(() => y(eS, eT()));}
function m(eS, eT){ function eU(){ B(eT(), eS, () => { dR().Fork(eU);});} dR().Fork(eU);}
function n(eS, eT){ return j(() => D(eS(), eT()));}
class o extends c { }
class p extends o { isConst;current;snap;view;id;get View(){ return this.view;} Get(){ return this.current;} Set(eS){ if(this.isConst)(((eT) => eT("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((eT) => { console.log(eT);}));else { bY(this.snap);this.current=eS;this.snap={s:Y(eS, [])};} } UpdateMaybe(eS){ const eT=eS(this.Get());if(eT!=null&&eT.$==1)this.Set(eT.$0);} constructor(eS, eT, eU){ super();this.isConst=eS;this.current=eU;this.snap=eT;this.view=() => this.snap;this.id=V();} }
function q(eS, eT, eU){ const eV=eT.s;const eW=eU.s;if(eV!=null&&eV.$==0)return eW!=null&&eW.$==0?{s:Z(eS(eV.$0, eW.$0))}:s(eS, eV.$0, eU);else if(eW!=null&&eW.$==0)return t(eS, eW.$0, eT);else { const eX={s:u0030([], [])};const eY=() => { const eZ=eX.s;if(!(eZ!=null&&eZ.$==0||eZ!=null&&eZ.$==2)){ const e0=u(eT);const e1=u(eU);if(e0!=null&&e0.$==1)if(e1!=null&&e1.$==1)if(e0.$0[1]&&e1.$0[1])v(eX, eS(e0.$0[0], e1.$0[0]));else w(eX, eS(e0.$0[0], e1.$0[0]));} };x(eT, eY, eX);x(eU, eY, eX);return eX;} }
function r(eS, eT){ const eU=eS.s;if(eU==null)eT();else eU!=null&&eU.$==2?eU.$1.push(eT):eU!=null&&eU.$==3?eU.$1.push(eT):void 0;}
function s(eS, eT, eU){ return y((eV) => eS(eT, eV), eU);}
function t(eS, eT, eU){ return y((eV) => eS(eV, eT), eU);}
function u(eS){ const eT=eS.s;return eT!=null&&eT.$==0?b7([eT.$0, true]):eT!=null&&eT.$==2?b7([eT.$0, false]):null;}
function v(eS, eT){ const eU=eS.s;if(eU!=null&&eU.$==3){ eS.s=Z(eT);const eV=eU.$0;for(let eW=0, eX=b3(eV)-1;eW<=eX;eW++)(b2(eV, eW))(eT);} else void 0;}
function w(eS, eT){ const eU=eS.s;if(eU!=null&&eU.$==3){ eS.s=Y(eT, eU.$1);const eV=eU.$0;for(let eW=0, eX=b3(eV)-1;eW<=eX;eW++)(b2(eV, eW))(eT);} else void 0;}
function x(eS, eT, eU){ const eV=eS.s;if(eV==null)bY(eU);else eV!=null&&eV.$==2?(z(eV.$1, eU),eT(eV.$0)):eV!=null&&eV.$==3?(eV.$0.push(eT),z(eV.$1, eU)):eT(eV.$0);}
function y(eS, eT){ const eU=eT.s;if(eU!=null&&eU.$==0)return{s:Z(eS(eU.$0))};else { const eV={s:u0030([], [])};x(eT, (eW) => { A(eV, eT, eS(eW));}, eV);return eV;} }
function z(eS, eT){ eS.push(eT);if(eS.length%20===0){ const eU=eS.slice(0);d_(eS);for(let eW=0, eX=b3(eU)-1;eW<=eX;eW++){ const eV=b2(eU, eW);if(typeof eV=="object")(((eY) => { if(eY.s)eS.push(eY);})(eV));else(((eY) => { eS.push(eY);})(eV));} } else void 0;}
function A(eS, eT, eU){ const eV=eT.s;if(eV!=null&&eV.$==0)v(eS, eU);else w(eS, eU);}
function B(eS, eT, eU){ const eV=eS.s;if(eV==null)eU();else eV!=null&&eV.$==2?(eV.$1.push(eU),eT(eV.$0)):eV!=null&&eV.$==3?(eV.$0.push(eT),eV.$1.push(eU)):eT(eV.$0);}
function C(eS){ const eT=eS.s;if(eT==null)return eS;else if(eT!=null&&eT.$==2){ const eU={s:Y(eT.$0, [])};E(eS, eU);return eU;} else if(eT!=null&&eT.$==3){ const eV={s:u0030([], [])};x(eS, (eW) => { A(eV, eS, eW);}, eV);return eV;} else return eS;}
function D(eS, eT){ const eU=eS.s;const eV=eT.s;if(eU!=null&&eU.$==0)return eV!=null&&eV.$==0?{s:Z(null)}:eT;else if(eV!=null&&eV.$==0)return eS;else { const eW={s:u0030([], [])};const eX=() => { const eY=eW.s;if(!(eY!=null&&eY.$==0||eY!=null&&eY.$==2)){ const eZ=u(eS);const e0=u(eT);if(eZ!=null&&eZ.$==1)if(e0!=null&&e0.$==1)if(eZ.$0[1]&&e0.$0[1])v(eW, null);else w(eW, null);} };x(eS, eX, eW);x(eT, eX, eW);return eW;} }
function E(eS, eT){ const eU=eS.s;if(eU==null)bY(eT);else eU!=null&&eU.$==2?z(eU.$1, eT):eU!=null&&eU.$==3?z(eU.$1, eT):void 0;}
function F(eS){!G()?(H(true),I(globalThis.document.body, "")):void 0;J().set_Item(eS, K(""));}
function G(){ return b1.LocalTemplatesLoaded;}
function H(eS){ b1.LocalTemplatesLoaded=eS;}
function I(eS, eT){ const eU=K(eT);const eV=new u0032("New_5");const eW=eS.querySelectorAll("[ws-template]");for(let e8=0, e9=eW.length-1;e8<=e9;e8++){ const eX=eW[e8];const eY=eX.getAttribute("ws-template").toLowerCase();eX.removeAttribute("ws-template");eV.set_Item(eY, L(eX));} const eZ=eS.querySelectorAll("[ws-children-template]");for(let e_=0, e$=eZ.length-1;e_<=e$;e_++){ const e0=eZ[e_];const e1=e0.getAttribute("ws-children-template").toLowerCase();e0.removeAttribute("ws-children-template");eV.set_Item(e1, M(e0));} const e2=eS.querySelectorAll("template[id]");for(let fa=0, fb=e2.length-1;fa<=fb;fa++){ const e3=e2[fa];eV.set_Item(e3.getAttribute("id").toLowerCase(), N(e3));} const e4=eS.querySelectorAll("template[name]");for(let fc=0, fd=e4.length-1;fc<=fd;fc++){ const e5=e4[fc];eV.set_Item(e5.getAttribute("name").toLowerCase(), N(e5));} const e6=new b6("New_3");function e7(fe){ if(!eU.ContainsKey(fe)){ let ff;const fg=(ff=null,[eV.TryGetValue(fe, {get:() => ff, set:(fh) => { ff=fh;}}), ff]);if(fg[0]){ e6.SAdd(fe);eV.RemoveKey(fe);O(eT, b7(fe), fg[1], b7(e7));} else console.warn(e6.Contains(fe)?"Encountered loop when instantiating "+fe:"Local template does not exist: "+fe);} } while(eV.count>0)e7(bH(eV.Keys));}
function J(){ return b1.LoadedTemplates;}
function K(eS){ let eT;const eU=(eT=null,[J().TryGetValue(eS, {get:() => eT, set:(eW) => { eT=eW;}}), eT]);if(eU[0])return eU[1];else { const eV=new u0032("New_5");J().set_Item(eS, eV);return eV;} }
function L(eS){ eS.removeAttribute("ws-template");const eT=eS.getAttribute("ws-replace");if(eT==null){ } else { eS.removeAttribute("ws-replace");const eU=eS.parentNode;if(u0033(eU, null)){ } else { const eV=globalThis.document.createElement(eS.tagName);eV.setAttribute("ws-replace", eT);eU.replaceChild(eV, eS);} } const eW=globalThis.document.createElement("div");eW.appendChild(eS);return eW;}
function M(eS){ const eT=globalThis.document.createElement("div");while(eS.hasChildNodes())eT.appendChild(eS.firstChild);return eT;}
function N(eS){ const eT=globalThis.document.createElement("div");const eU=eS.content;for(let eV=0, eW=eU.childNodes.length-1;eV<=eW;eV++)eT.appendChild(eU.childNodes[eV].cloneNode(true));return eT;}
function O(eS, eT, eU, eV){ const eW=new b6("New_3");function eX(e4, e5){ while(true)switch(e4){ case 0:if(e5!==null){ const e6=e5.nextSibling;if(u0033(e5.nodeType, Node.TEXT_NODE))c5(e5);else if(u0033(e5.nodeType, Node.ELEMENT_NODE))eZ(e5);e5=e6;} else return null;break;case 1:const e7=db(e5.nodeName, b7(3), null).toLowerCase();const e8=e7.indexOf(".");const e9=e8===-1?[eS, e7]:[db(e7, null, b7(e8-1)), db(e7, b7(e8+1), null)];const e_=e9[1];const e$=e9[0];if(e$!=""&&!J().ContainsKey(e$))return c6(e_);else { if(e$==""&&eV!=null)eV.$0(e_);const fa=J().Item(e$);if(!fa.ContainsKey(e_))return c6(e_);else { const fb=fa.Item(e_);const fc=fb.cloneNode(true);const fd=new b6("New_3");const fe=new u0032("New_5");const ff=e5.attributes;for(let fp=0, fq=ff.length-1;fp<=fq;fp++){ const fg=ff.item(fp).name.toLowerCase();const fh=ff.item(fp).nodeValue;let fi=fh==""?fg:fh.toLowerCase();fe.set_Item(fg, fi);if(!fd.SAdd(fg))console.warn("Hole mapped twice", fg);} for(let fr=0, fs=e5.childNodes.length-1;fr<=fs;fr++){ const fj=e5.childNodes[fr];if(u0033(fj.nodeType, Node.ELEMENT_NODE))if(!fd.SAdd(fj.nodeName.toLowerCase()))console.warn("Hole filled twice", e_);} const fk=e5.childNodes.length===1&&u0033(e5.firstChild.nodeType, Node.TEXT_NODE);if(fk){ const fl=c7(fc, e5.firstChild.textContent, e_);const fm=((ft) =>(fu) => ft.SAdd(fu))(fd);let fn=((ft) =>(fu) => { if(fu!=null)ft(fu.$0);})((ft) => { fm(ft);});fn(fl);} c8(fc, fd);if(!fk){ for(let ft=0, fu=e5.childNodes.length-1;ft<=fu;ft++){ const fo=e5.childNodes[ft];if(u0033(fo.nodeType, Node.ELEMENT_NODE))if(fo.hasAttributes())c9(fc, fo);else eY(fc, fo);} } c_(fc, fe);c$(fc, e5.parentNode, e5);e5.parentNode.removeChild(e5);return;} } break;} } function eY(e4, e5){ const e6=e5.nodeName.toLowerCase();const e7=(e$, fa) => { if(e6=="title"&&e5.hasChildNodes()){ const fb=bt(e5.textContent);e5.removeChild(e5.firstChild);while(fb.hasChildNodes())e5.appendChild(fb.firstChild);} eZ(e5);return c$(e5, e$, fa);};P(e4, "[ws-attr-holes]", (e$) => { const fa=dw(e$.getAttribute("ws-attr-holes"), [" "], 1);for(let fe=0, ff=fa.length-1;fe<=ff;fe++){ const fb=b2(fa, fe);let fc=new RegExp("\\${"+e6+"}", "ig");let fd=e$.getAttribute(fb).replace(fc, e5.textContent);e$.setAttribute(fb, fd);} });const e8=e4.querySelector("[ws-hole="+e6+"]");if(u0033(e8, null)){ const e9=e4.querySelector("[ws-replace="+e6+"]");if(u0033(e9, null)){ const e_=e4.querySelector("slot[name="+e6+"]");return e4.tagName.toLowerCase()=="template"?(e7(e_.parentNode, e_),void e_.parentNode.removeChild(e_)):null;} else { e7(e9.parentNode, e9);e9.parentNode.removeChild(e9);return;} } else { while(e8.hasChildNodes())e8.removeChild(e8.lastChild);e8.removeAttribute("ws-hole");return e7(e8, null);} } function eZ(e4){ if(!e4.hasAttribute("ws-preserve"))if(dx(e4.nodeName.toLowerCase(), "ws-"))e1(e4);else { da(e4);e0(e4.firstChild);} } function e0(e4){ return eX(0, e4);} function e1(e4){ return eX(1, e4);} function e2(e4){ while(true){ const e5=e4.querySelector("[ws-template]");if(u0033(e5, null)){ const e6=e4.querySelector("[ws-children-template]");if(u0033(e6, null)){ const e7=e4.querySelectorAll("template[id]");for(let fb=1, fc=e7.length-1;fb<=fc;fb++){ const e8=e7[fb];if(eW.Contains(e8)){ } else { O(eS, b7(e8.getAttribute("id")), e8, null);eW.SAdd(e8);} } const e9=e4.querySelectorAll("template[name]");for(let fd=1, fe=e9.length-1;fd<=fe;fd++){ const e_=e9[fd];if(eW.Contains(e_)){ } else { O(eS, b7(e_.getAttribute("name")), e_, null);eW.SAdd(e_);} } return null;} else { const e$=e6.getAttribute("ws-children-template");e6.removeAttribute("ws-children-template");O(eS, b7(e$), e6, null);e4=e4;} } else { const fa=e5.getAttribute("ws-template");(Q(eS, b7(fa), e5))(null);e4=e4;} } } const e3=(eT==null?"":eT.$0).toLowerCase();K(eS).set_Item(e3, eU);if(eU.hasChildNodes()){ e2(eU);e0(eU.firstChild);} }
function P(eS, eT, eU){ bz(eS, eT, (eV) => { if(eV.closest("[ws-preserve]")==null)eU(eV);});}
function Q(eS, eT, eU){ const eV=L(eU);return(eW) => { O(eS, eT, eV, eW);};}
function R(){ return b1.TextHoleRE;}
class S extends c { docNode;updates;static RunById(eS, eT){ const eU=globalThis.document.getElementById(eS);if(u0033(eU, null))e("invalid id: "+eS);else S.Run(eU, eT);} static TextNode(eS){ return S.Mk(bC(globalThis.document.createTextNode(eS)), k());} static IntInputUnchecked(eS, eT){ return S.InputInternal("input", () => bG(eS, [eT.Get()===0?U.Create("value", "0"):be(), bV(eT), U.Create("type", "number")]));} static Run(eS, eT){ b9(eS, eT.docNode);S.RunInPlace(false, eS, eT);} static Element(eS, eT, eU){ const eV=U.Concat(eT);const eW=S.Concat(eU);return dq.New(globalThis.document.createElement(eS), eV, eW);} static Mk(eS, eT){ return new S(eS, eT);} static InputInternal(eS, eT){ const eU=globalThis.document.createElement(eS);return dq.New(eU, U.Concat(eT(eU)), S.Empty);} static TextView(eS){ const eT=b_();return S.Mk(bD(eT), l((eU) => { b$(eT, eU);}, eS));} static RunInPlace(eS, eT, eU){ const eV=cb(eT, eU.docNode);m(dh()||do_1()?dp(cc(eS, eV, eU.docNode)):() => { cd(eS, eV, eU.docNode);}, eU.updates);} static Concat(eS){ return ds(S.Empty, S.Append, dr(eS));} static get Empty(){ return S.Mk(null, k());} static Append(eS, eT){ return S.Mk(bF(eS.docNode, eT.docNode), n(eS.updates, eT.updates));} constructor(eS, eT){ super();this.docNode=eS;this.updates=eT;} }
function T(eS){ const eT={};const eU=cp(eS);try { while(eU.MoveNext()){ const eV=eU.Current;eT[eV[0]]=eV[1];} } finally { if(typeof eU=="object"&&a(eU))eU.Dispose();} return eT;}
class U { static Create(eS, eT){ return bd((eU) => { eU.setAttribute(eS, eT);});} static Concat(eS){ const eT=dr(eS);return ds(be(), U.Append, eT);} static A3(eS){ return eO(U, {$:3, $0:eS});} static Append(eS, eT){ return bg(eS, eT);} static A2(eS, eT){ return eO(U, {$:2, $0:eS, $1:eT});} static A1(eS){ return eO(U, {$:1, $0:eS});} }
function V(){ W(X()+1);return X();}
function W(eS){ cN.counter=eS;}
function X(){ return cN.counter;}
function Y(eS, eT){ return{$:2, $0:eS, $1:eT};}
function Z(eS){ return{$:0, $0:eS};}
function u0030(eS, eT){ return{$:3, $0:eS, $1:eT};}
function u0031(eS){ let eT=[];let eU;for(var eV in eS)eT.push(eS[eV]);return eT;}
class u0032 extends c { equals;hash;count;data;set_Item(eS, eT){ this.set(eS, eT);} ContainsKey(eS){ const eT=this.data[this.hash(eS)];return eT==null?false:cQ((eU) => this.equals.apply(null, [(f(eU))[0], eS]), eT);} TryGetValue(eS, eT){ const eU=this.data[this.hash(eS)];if(eU==null)return false;else { const eV=cR((eW) => { const eX=f(eW);return this.equals.apply(null, [eX[0], eS])?b7(eX[1]):null;}, eU);return eV!=null&&eV.$==1&&(eT.set(eV.$0),true);} } RemoveKey(eS){ return this.remove(eS);} get Keys(){ return new df(this);} set(eS, eT){ const eU=this.hash(eS);const eV=this.data[eU];if(eV==null){ this.count=this.count+1;this.data[eU]=new Array({K:eS, V:eT});} else { const eW=cS((eX) => this.equals.apply(null, [(f(eX))[0], eS]), eV);if(eW==null){ this.count=this.count+1;eV.push({K:eS, V:eT});} else eV[eW.$0]={K:eS, V:eT};} } remove(eS){ const eT=this.hash(eS);const eU=this.data[eT];if(eU==null)return false;else { const eV=cT((eW) =>!this.equals.apply(null, [(f(eW))[0], eS]), eU);return b3(eV)<eU.length&&(this.count=this.count-1,this.data[eT]=eV,true);} } Item(eS){ return this.get(eS);} get(eS){ const eT=this.data[this.hash(eS)];return eT==null?cP():cY((eU) => { const eV=f(eU);return this.equals.apply(null, [eV[0], eS])?b7(eV[1]):null;}, eT);} GetEnumerator(){ return cs(c0(u0031(this.data)));} static New_5(){ return new this("New_5");} static New_6(eS, eT, eU){ return new this("New_6", eS, eT, eU);} constructor(eS, eT, eU, eV){ if(eS=="New_5"){ eS="New_6";eT=[];eU=u0033;eV=u0036;} if(eS=="New_6"){ const eW=eT;const eX=eU;const eY=eV;super();this.equals=eX;this.hash=eY;this.count=0;this.data=[];const eZ=cp(eW);try { while(eZ.MoveNext()){ const e0=eZ.Current;this.set(e0.K, e0.V);} } finally { if(typeof eZ=="object"&&a(eZ))eZ.Dispose();} } } }
function u0033(eS, eT){ if(eS===eT)return true;else { const eU=typeof eS;if(eU=="object"){ if(eS===null||eS===void 0||eT===null||eT===void 0||!u0033(typeof eT, "object"))return false;else if("Equals"in eS)return eS.Equals(eT);else if("Equals"in eT)return false;else if(eS instanceof Array&&eT instanceof Array)return u0034(eS, eT);else if(eS instanceof Date&&eT instanceof Date)return u0035(eS, eT);else { const eV=[true];let eW;for(var eY in eS)if(((eZ) => { eV[0]=!eS.hasOwnProperty(eZ)||eT.hasOwnProperty(eZ)&&u0033(eS[eZ], eT[eZ]);return!eV[0];})(eY))break;if(eV[0]){ let eX;for(var eZ in eT)if(((e0) => { eV[0]=!eT.hasOwnProperty(e0)||eS.hasOwnProperty(e0);return!eV[0];})(eZ))break;} return eV[0];} } else return eU=="function"&&("$Func"in eS?eS.$Func===eT.$Func&&eS.$Target===eT.$Target:"$Invokes"in eS&&"$Invokes"in eT&&u0034(eS.$Invokes, eT.$Invokes));} }
function u0034(eS, eT){ let eU;let eV;if(b3(eS)===b3(eT)){ eU=true;eV=0;while(eU&&eV<b3(eS)){!u0033(b2(eS, eV), b2(eT, eV))?eU=false:void 0;eV=eV+1;} return eU;} else return false;}
function u0035(eS, eT){ return eS.getTime()===eT.getTime();}
function u0036(eS){ const eT=typeof eS;return eT=="function"?0:eT=="boolean"?eS?1:0:eT=="number"?eS:eT=="string"?u0037(eS):eT=="object"?eS==null?0:eS instanceof Array?u0038(eS):u0039(eS):0;}
function u0037(eS){ let eT;if(eS===null)return 0;else { eT=5381;for(let eU=0, eV=eS.length-1;eU<=eV;eU++)eT=$(eT, eS[eU].charCodeAt());return eT;} }
function u0038(eS){ let eT=-34948909;for(let eU=0, eV=b3(eS)-1;eU<=eV;eU++)eT=$(eT, u0036(b2(eS, eU)));return eT;}
function u0039(eS){ if("GetHashCode"in eS)return eS.GetHashCode();else { const eT=[0];let eU;for(var eV in eS)if(((eW) => { eT[0]=$($(eT[0], u0037(eW)), u0036(eS[eW]));return false;})(eV))break;return eT[0];} }
function $(eS, eT){ return(eS<<5)+eS+eT;}
function ba(eS, eT){ if(eS===eT)return 0;else { const eU=typeof eS;switch(eU=="function"?1:eU=="boolean"?2:eU=="number"?2:eU=="string"?2:eU=="object"?3:0){ case 0:return typeof eT=="undefined"?0:-1;case 1:return e("Cannot compare function values.");case 2:return eS<eT?-1:1;case 3:if(eS===null)return -1;else if(eT===null)return 1;else if("CompareTo"in eS)return eS.CompareTo(eT);else if("CompareTo0"in eS)return eS.CompareTo0(eT);else if(eS instanceof Array&&eT instanceof Array)return bb(eS, eT);else if(eS instanceof Date&&eT instanceof Date)return bc(eS, eT);else { const eV=[0];let eW;for(var eY in eS)if(((eZ) =>!eS.hasOwnProperty(eZ)?false:!eT.hasOwnProperty(eZ)?(eV[0]=1,true):(eV[0]=ba(eS[eZ], eT[eZ]),eV[0]!==0))(eY))break;if(eV[0]===0){ let eX;for(var eZ in eT)if(((e0) =>!eT.hasOwnProperty(e0)?false:!eS.hasOwnProperty(e0)&&(eV[0]=-1,true))(eZ))break;} return eV[0];} break;} } }
function bb(eS, eT){ let eU;let eV;if(b3(eS)<b3(eT))return -1;else if(b3(eS)>b3(eT))return 1;else { eU=0;eV=0;while(eU===0&&eV<b3(eS)){ eU=ba(b2(eS, eV), b2(eT, eV));eV=eV+1;} return eU;} }
function bc(eS, eT){ return ba(eS.getTime(), eT.getTime());}
function bd(eS){ return U.A3(eS);}
function be(){ return du.EmptyAttr;}
function bf(eS){ return dt((eT) => eT.NChanged, k(), n, eS.DynNodes);}
function bg(eS, eT){ if(eS===null)return eT;else if(eT===null)return eS;else { const eU=U.A2(eS, eT);bp(eU, bq(eS)|bq(eT));return eU;} }
function bh(eS, eT){ return U.A1(new el(eS, eT));}
function bi(eS, eT){ const eU=[];const eV=[];function eW(eZ){ while(true){ if(!(eZ===null)){ if(eZ!=null&&eZ.$==1)return eU.push(eZ.$0);else if(eZ!=null&&eZ.$==2){ const e0=eZ.$1;const e1=eZ.$0;eW(e1);eZ=e0;} else return eZ!=null&&eZ.$==3?eZ.$0(eS):eZ!=null&&eZ.$==4?eV.push(eZ.$0):null;} else return null;} } eW(eT);const eX=eU.slice(0);let eY=dD(eS, bq(eT), eX, eV.length===0?null:b7((eZ) => { bO((e0) => { e0(eZ);}, eV);}));return eY;}
function bj(eS){ const eT=2;return(eS.DynFlags&eT)===eT;}
function bk(eS){ return br(eS, (eT, eU) => eT.NGetExitAnim(eU));}
function bl(eS){ const eT=1;return(eS.DynFlags&eT)===eT;}
function bm(eS){ return br(eS, (eT, eU) => eT.NGetEnterAnim(eU));}
function bn(eS){ const eT=4;return(eS.DynFlags&eT)===eT;}
function bo(eS){ return br(eS, (eT, eU) => eT.NGetChangeAnim(eU));}
function bp(eS, eT){ eS.flags=eT;}
function bq(eS){ return eS!==null&&eS.hasOwnProperty("flags")?eS.flags:0;}
function br(eS, eT){ return dm(cU((eU) => eT(eU, eS.DynElem), eS.DynNodes));}
function bs(eS, eT){ cV((eU) => { eU.NSync(eS);}, eT.DynNodes);}
function bt(eS){ const eT=globalThis.document.createElement("div");if(!bu().test(eS)){ eT.appendChild(globalThis.document.createTextNode(eS));return eT;} else { const eU=by().exec(eS);const eV=u0033(eU, null)?"":b2(eU, 1).toLowerCase();const eW=(bv())[eV];const eX=eW?eW:bw();eT.innerHTML=eX[1]+eS.replace(bx(), "<$1></$2>")+eX[2];function eY(eZ, e0){ while(true){ if(e0===0)return eZ;else { const e1=e0;eZ=eZ.lastChild;e0=e1-1;} } } return eY(eT, eX[0]);} }
function bu(){ return d$.rhtml;}
function bv(){ return d$.wrapMap;}
function bw(){ return d$.defaultWrap;}
function bx(){ return d$.rxhtmlTag;}
function by(){ return d$.rtagName;}
function bz(eS, eT, eU){ const eV=eS.querySelectorAll(eT);for(let eW=0, eX=eV.length-1;eW<=eX;eW++)eU(eV[eW]);}
function bA(eS, eT, eU){ let eV;if(eU.parentNode===eS){ const eW=eU.nextSibling;let eX=u0033(eW, null)?null:eW;eV=eT===eX;} else eV=false;if(!eV)eS.insertBefore(eU, eT);}
function bB(eS, eT){ if(eT.parentNode===eS)eS.removeChild(eT);}
function bC(eS){ return{$:5, $0:eS};}
function bD(eS){ return{$:4, $0:eS};}
function bE(eS){ return{$:1, $0:eS};}
function bF(eS, eT){ return{$:0, $0:eS, $1:eT};}
function bG(eS, eT){ return{GetEnumerator:() => { const eU=cp(eS);const eV=[true];return new ct(eU, null, (eW) => { if(eW.s.MoveNext()){ eW.c=eW.s.Current;return true;} else { const eX=eW.s;if(!u0033(eX, null))eX.Dispose();eW.s=null;return eV[0]&&(eV[0]=false,eW.s=cp(eT),eW.s.MoveNext()?(eW.c=eW.s.Current,true):(eW.s.Dispose(),eW.s=null,false));} }, (eW) => { const eX=eW.s;if(!u0033(eX, null))eX.Dispose();});}};}
function bH(eS){ const eT=cp(eS);try { return eT.MoveNext()?eT.Current:dc();} finally { if(typeof eT=="object"&&a(eT))eT.Dispose();} }
function bI(eS, eT, eU){ let eV=eT;const eW=cp(eU);try { while(eW.MoveNext())eV=eS(eV, eW.Current);return eV;} finally { if(typeof eW=="object"&&a(eW))eW.Dispose();} }
function bJ(eS){ return{GetEnumerator:() => cp(eS())};}
function bK(eS, eT){ return bM(bL(eS, eT));}
function bL(eS, eT){ return{GetEnumerator:() => { const eU=cp(eT);return new ct(null, null, (eV) => eU.MoveNext()&&(eV.c=eS(eU.Current),true), () => { eU.Dispose();});}};}
function bM(eS){ return{GetEnumerator:() => { const eT=cp(eS);function eU(eV){ while(true){ const eW=eV.s;if(u0033(eW, null)){ if(eT.MoveNext()){ eV.s=cp(eT.Current);eV=eV;} else { eT.Dispose();return false;} } else if(eW.MoveNext()){ eV.c=eW.Current;return true;} else { eV.Dispose();eV.s=null;eV=eV;} } } return new ct(null, null, eU, (eV) => { const eW=eV.s;if(!u0033(eW, null))eW.Dispose();if(!u0033(eT, null))eT.Dispose();});}};}
function bN(eS, eT){ return bP(eS, bQ(eT));}
function bO(eS, eT){ const eU=cp(eT);try { while(eU.MoveNext())eS(eU.Current);} finally { if(typeof eU=="object"&&a(eU))eU.Dispose();} }
function bP(eS, eT){ eS<0?de():void 0;return{GetEnumerator:() => { const eU=[cp(eT)];return new ct(0, null, (eV) => { eV.s=eV.s+1;if(eV.s>eS)return false;else { const eW=eU[0];return u0033(eW, null)?dc():eW.MoveNext()?(eV.c=eW.Current,eV.s===eS?(eW.Dispose(),eU[0]=null):void 0,true):(eW.Dispose(),eU[0]=null,dc());} }, () => { const eV=eU[0];if(!u0033(eV, null))eV.Dispose();});}};}
function bQ(eS){ return{GetEnumerator:() => new ct(0, null, (eT) => { eT.c=eS(eT.s);eT.s=eT.s+1;return true;}, void 0)};}
function bR(eS, eT){ return!bT((eU) =>!eS(eU), eT);}
function bS(eS){ const eT=cp(eS);try { if(!eT.MoveNext())bU();let eU=eT.Current;while(eT.MoveNext()){ const eV=eT.Current;if(ba(eV, eU)===1)eU=eV;} return eU;} finally { if(typeof eT=="object"&&a(eT))eT.Dispose();} }
function bT(eS, eT){ const eU=cp(eT);try { let eV=false;while(!eV&&eU.MoveNext())eV=eS(eU.Current);return eV;} finally { if(typeof eU=="object"&&a(eU))eU.Dispose();} }
function bU(){ return e("The input sequence was empty.");}
function bV(eS){ return bW(cu(), eS);}
function bW(eS, eT){ const eU=eS(eT);return U.Append(bd(eU[0]), bX(eU[1], eU[2]));}
function bX(eS, eT){ return bh(eT, eS);}
function bY(eS){ let eT;const eU=eS.s;if(eU==null||(eU!=null&&eU.$==2?(eT=eU.$1,false):eU!=null&&eU.$==3?(eT=eU.$1,false):true))void 0;else { eS.s=null;for(let eW=0, eX=b3(eT)-1;eW<=eX;eW++){ const eV=b2(eT, eW);if(typeof eV=="object")(((eY) => { bY(eY);})(eV));else eV();} } }
class bZ { }
function b0(eS, eT){ return ek(eS, -2147483648, 2147483647, eT);}
let b1=eN((eS) => class eT { static { b1=eS(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new u0032("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new u0032("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
function b2(eS, eT){ b4(eS, eT);return eS[eT];}
function b3(eS){ return eS.dims===2?eS.length*eS.length:eS.length;}
function b4(eS, eT){ if(eT<0||eT>=eS.length)e("Index was outside the bounds of the array.");}
function b5(eS, eT, eU){ b4(eS, eT);eS[eT]=eU;}
class b6 extends c { equals;hash;data;count;SAdd(eS){ return this.add(eS);} Contains(eS){ const eT=this.data[this.hash(eS)];return eT==null?false:this.arrContains(eS, eT);} add(eS){ const eT=this.hash(eS);const eU=this.data[eT];return eU==null?(this.data[eT]=[eS],this.count=this.count+1,true):this.arrContains(eS, eU)?false:(eU.push(eS),this.count=this.count+1,true);} arrContains(eS, eT){ let eU=true;let eV=0;const eW=eT.length;while(eU&&eV<eW)if(this.equals.apply(null, [eT[eV], eS]))eU=false;else eV=eV+1;return!eU;} GetEnumerator(){ return cp(em(this.data));} ExceptWith(eS){ const eT=cp(eS);try { while(eT.MoveNext())this.Remove(eT.Current);} finally { if(typeof eT=="object"&&a(eT))eT.Dispose();} } get Count(){ return this.count;} IntersectWith(eS){ const eT=new b6("New_4", eS, this.equals, this.hash);const eU=em(this.data);for(let eW=0, eX=eU.length-1;eW<=eX;eW++){ const eV=eU[eW];if(!eT.Contains(eV))this.Remove(eV);} } Remove(eS){ const eT=this.data[this.hash(eS)];return eT==null?false:this.arrRemove(eS, eT)&&(this.count=this.count-1,true);} CopyTo(eS, eT){ const eU=em(this.data);for(let eV=0, eW=eU.length-1;eV<=eW;eV++)b5(eS, eV+eT, eU[eV]);} arrRemove(eS, eT){ let eU=true;let eV=0;const eW=eT.length;while(eU&&eV<eW)if(this.equals.apply(null, [eT[eV], eS])){ eT.splice(eV, 1);eU=false;} else eV=eV+1;return!eU;} static New_3(){ return new this("New_3");} static New_4(eS, eT, eU){ return new this("New_4", eS, eT, eU);} static New_2(eS){ return new this("New_2", eS);} constructor(eS, eT, eU, eV){ if(eS=="New_3"){ eS="New_4";eT=[];eU=u0033;eV=u0036;} let eW;if(eS=="New_2"){ eW=eT;eS="New_4";eT=eW;eU=u0033;eV=u0036;} if(eS=="New_4"){ const eX=eT;const eY=eU;const eZ=eV;super();this.equals=eY;this.hash=eZ;this.data=[];this.count=0;const e0=cp(eX);try { while(e0.MoveNext())this.add(e0.Current);} finally { if(typeof e0=="object"&&a(e0))e0.Dispose();} } } }
function b7(eS){ return{$:1, $0:eS};}
class b8 extends c { }
function b9(eS, eT){ ca(eS, eT, null);}
function b_(){ return{Text:globalThis.document.createTextNode(""), Dirty:false, Value:""};}
function b$(eS, eT){ eS.Value=eT;eS.Dirty=true;}
function ca(eS, eT, eU){ while(true){ if(eT!=null&&eT.$==1)return ce(eS, eT.$0.El, eU);else if(eT!=null&&eT.$==2){ const eV=eT.$0;eV.Dirty=false;eT=eV.Current;} else if(eT==null)return eU;else if(eT!=null&&eT.$==4)return ce(eS, eT.$0.Text, eU);else if(eT!=null&&eT.$==5)return ce(eS, eT.$0, eU);else if(eT!=null&&eT.$==6)return cW((eY, eZ) =>((((e0) =>(e1) =>(e2) => e1==null||e1.constructor===Object?ca(e0, e1, e2):ce(e0, e1, e2))(eS))(eY))(eZ), eT.$0.Els, eU);else { const eW=eT.$1;const eX=eT.$0;eT=eX;eU=ca(eS, eW, eU);} } }
function cb(eS, eT){ return dE(dF(), cf(eS, be(), eT));}
function cc(eS, eT, eU){ if(dh()){ const eV=null;return dM(() => { const eW=dG(eU);const eX=cj(eT, eW);const eY=ci(eT, eW);return dN(di(dj(eX, ch(eT, eW))), () => dN(cg(eS, eT), () => dN(di(eY), () => { eT.PreviousNodes=eW;return dQ(null);})));});} else return cg(eS, eT);}
function cd(eS, eT, eU){ const eV=dG(eU);ck(eS, eT.Top);eT.PreviousNodes=eV;}
function ce(eS, eT, eU){ bA(eS, eU, eT);return eT;}
function cf(eS, eT, eU){ b9(eS, eU);const eV=bi(eS, eT);return dg.New(eV, eU, null, eS, V(), eP(eV.OnAfterRender));}
function cg(eS, eT){ if(do_1()){ const eU=(eV) => { requestAnimationFrame(() => { ck(eS, eT.Top);eV();});};return dV((eV, eW, eX) => eU.apply(null, [eV, eW, eX]));} else { ck(eS, eT.Top);return dQ(null);} }
function ch(eS, eT){ return dm(cU((eU) => bk(eU.Attr), dK(dJ(eT, dI((eU) => bj(eU.Attr), eS.PreviousNodes)))));}
function ci(eS, eT){ return dm(cU((eU) => bm(eU.Attr), dK(dJ(eS.PreviousNodes, dI((eU) => bl(eU.Attr), eT)))));}
function cj(eS, eT){ const eU=(eW) => bn(eW.Attr);const eV=(eW) => dI(eU, eW);return dm(cU((eW) => bo(eW.Attr), dK(dL(eV(eS.PreviousNodes), eV(eT)))));}
function ck(eS, eT){!eS?cl(eT):void 0;cm(eT.Children);cn(eT);}
function cl(eS){ function eT(eU){ function eV(eW){ while(true){ if(eW!=null&&eW.$==0){ const eX=eW.$1;const eY=eW.$0;if(eV(eY))return true;else eW=eX;} else if(eW!=null&&eW.$==2){ const eZ=eW.$0;if(eZ.Dirty)return true;else eW=eZ.Current;} else if(eW!=null&&eW.$==6){ const e0=eW.$0;return e0.Dirty||cQ(eT, e0.Holes);} else return false;} } return eV(eU.Children);} bs(eS.El, eS.Attr);if(eT(eS))co(eS);}
function cm(eS){ while(true){ if(eS!=null&&eS.$==1)return ck(false, eS.$0);else if(eS!=null&&eS.$==2){ const eT=eS.$0;eS=eT.Current;} else if(eS==null)return null;else if(eS!=null&&eS.$==5)return null;else if(eS!=null&&eS.$==4){ const eU=eS.$0;return eU.Dirty?(eU.Text.nodeValue=eU.Value,eU.Dirty=false):null;} else if(eS!=null&&eS.$==6){ const eV=eS.$0;cV((eY) => { ck(false, eY);}, eV.Holes);cV((eY) => { bs(eY[0], eY[1]);}, eV.Attrs);return cn(eV);} else { const eW=eS.$1;const eX=eS.$0;cm(eX);eS=eW;} } }
function cn(eS){ const eT=eP(eS.Render);if(eT!=null&&eT.$==1){ eT.$0(eS.El);eQ(eS, "Render", null);} }
function co(eS){ const eT=eS.El;function eU(eY, eZ){ while(true){ if(eY!=null&&eY.$==1)return eY.$0.El;else if(eY!=null&&eY.$==2){ const e0=eY.$0;if(e0.Dirty){ e0.Dirty=false;return ca(eT, e0.Current, eZ);} else eY=e0.Current;} else if(eY==null)return eZ;else if(eY!=null&&eY.$==4)return eY.$0.Text;else if(eY!=null&&eY.$==5)return eY.$0;else if(eY!=null&&eY.$==6){ const e1=eY.$0;if(e1.Dirty)e1.Dirty=false;return cW((e4, e5) => e4==null||e4.constructor===Object?eU(e4, e5):e4, e1.Els, eZ);} else { const e2=eY.$1;const e3=eY.$0;eY=e3;eZ=eU(e2, eZ);} } } const eV=eS.El;eD((eY) => { bB(eV, eY);}, eC(eE(eS), eB(eS.El, eP(eS.Delimiters))));let eW=eS.Children;const eX=eP(eS.Delimiters);eU(eW, eX!=null&&eX.$==1?eX.$0[1]:null);}
function cp(eS){ return eS instanceof Array?cq(eS):u0033(typeof eS, "string")?cr(eS):eS.GetEnumerator();}
function cq(eS){ return new ct(0, null, (eT) => { const eU=eT.s;return eU<b3(eS)&&(eT.c=b2(eS, eU),eT.s=eU+1,true);}, void 0);}
function cr(eS){ return new ct(0, null, (eT) => { const eU=eT.s;return eU<eS.length&&(eT.c=eS[eU],eT.s=eU+1,true);}, void 0);}
function cs(eS){ return eS instanceof Array?cq(eS):u0033(typeof eS, "string")?cr(eS):"GetEnumerator0"in eS?eS.GetEnumerator0():eS.GetEnumerator();}
class ct extends c { s;c;n;d;e;MoveNext(){ const eS=this.n(this);this.e=eS?1:2;return eS;} get Current(){ return this.e===1?this.c:this.e===0?e("Enumeration has not started. Call MoveNext."):e("Enumeration already finished.");} Dispose(){ if(this.d)this.d(this);} constructor(eS, eT, eU, eV){ super();this.s=eS;this.c=eT;this.n=eU;this.d=eV;this.e=0;} }
function cu(){ return du.IntApplyUnchecked;}
function cv(eS, eT, eU){ let eV;eV=null;return[(eW) => { const eX=() => { eU.UpdateMaybe((eY) => { let eZ;eV=eS(eW);return eV!=null&&eV.$==1&&(!u0033(eV.$0, eY)&&(eZ=[eV, eV.$0],true))?eZ[0]:null;});};eW.addEventListener("change", eX);eW.addEventListener("input", eX);eW.addEventListener("keypress", eX);}, (eW) => { const eX=eT(eW);return(eY) => eY==null?null:eX(eY.$0);}, l((eW) => { let eX;return eV!=null&&eV.$==1&&(u0033(eV.$0, eW)&&(eX=eV.$0,true))?null:b7(eW);}, eU.View)];}
function cw(){ return du.StringSet;}
function cx(){ return du.StringGet;}
function cy(){ return du.StringListSet;}
function cz(){ return du.StringListGet;}
function cA(){ return du.DateTimeSetUnchecked;}
function cB(){ return du.DateTimeGetUnchecked;}
function cC(eS, eT, eU){ let eV;eV=null;return[(eW) => { eW.addEventListener("change", () => { eU.UpdateMaybe((eX) => { let eY;eV=eS(eW);return eV!=null&&eV.$==1&&(eV.$0!==eX&&(eY=[eV, eV.$0],true))?eY[0]:null;});});}, (eW) => { const eX=eT(eW);return(eY) => eY==null?null:eX(eY.$0);}, l((eW) => { let eX;return eV!=null&&eV.$==1&&(u0033(eV.$0, eW)&&(eX=eV.$0,true))?null:b7(eW);}, eU.View)];}
function cD(){ return du.FileSetUnchecked;}
function cE(){ return du.FileGetUnchecked;}
function cF(){ return du.IntSetUnchecked;}
function cG(){ return du.IntGetUnchecked;}
function cH(){ return du.IntSetChecked;}
function cI(){ return du.IntGetChecked;}
function cJ(){ return du.FloatSetUnchecked;}
function cK(){ return du.FloatGetUnchecked;}
function cL(){ return du.FloatSetChecked;}
function cM(){ return du.FloatGetChecked;}
let cN=eN((eS) => class eT { static { cN=eS(this);} static counter;static { this.counter=0;} });
class cO extends c { }
function cP(){ throw new en("New");}
function cQ(eS, eT){ let eU=false;let eV=0;while(!eU&&eV<b3(eT))if(eS(eT[eV]))eU=true;else eV=eV+1;return eU;}
function cR(eS, eT){ let eU=null;let eV=0;while(eV<eT.length&&eU==null){ const eW=eS(eT[eV]);if(eW!=null&&eW.$==1)eU=eW;eV=eV+1;} return eU;}
function cS(eS, eT){ let eU=null;let eV=0;while(eV<eT.length&&eU==null){ eS(eT[eV])?eU=b7(eV):void 0;eV=eV+1;} return eU;}
function cT(eS, eT){ const eU=[];for(let eV=0, eW=eT.length-1;eV<=eW;eV++)if(eS(eT[eV]))eU.push(eT[eV]);return eU;}
function cU(eS, eT){ const eU=new Array(eT.length);for(let eV=0, eW=eT.length-1;eV<=eW;eV++)eU[eV]=eS(eT[eV]);return eU;}
function cV(eS, eT){ for(let eU=0, eV=eT.length-1;eU<=eV;eU++)eS(eT[eU]);}
function cW(eS, eT, eU){ let eV=eU;const eW=eT.length;for(let eX=1, eY=eW;eX<=eY;eX++)eV=eS(eT[eW-eX], eV);return eV;}
function cX(eS){ const eT=[];let eU=eS;while(!(eU.$==0)){ eT.push(ef(eU));eU=eg(eU);} return eT;}
function cY(eS, eT){ const eU=cR(eS, eT);return eU==null?e("KeyNotFoundException"):eU.$0;}
function cZ(eS){ if(eS instanceof Array)return eS.slice();else if(eS instanceof d7)return cX(eS);else { const eT=[];const eU=cp(eS);try { while(eU.MoveNext())eT.push(eU.Current);return eT;} finally { if(typeof eU=="object"&&a(eU))eU.Dispose();} } }
function c0(eS){ return Array.prototype.concat.apply([], cZ(eS));}
function c1(eS, eT){ const eU=[];for(let eW=0, eX=eT.length-1;eW<=eX;eW++){ const eV=eS(eT[eW]);if(eV==null){ } else eU.push(eV.$0);} return eU;}
function c2(eS, eT){ const eU=new Array(eS);for(let eV=0, eW=eS-1;eV<=eW;eV++)eU[eV]=eT;return eU;}
function c3(eS, eT){ if(eS<0)e("Negative size given.");else null;const eU=new Array(eS);for(let eV=0, eW=eS-1;eV<=eW;eV++)eU[eV]=eT(eV);return eU;}
function c4(eS, eT){ let eU=true;let eV=0;while(eU&&eV<b3(eT))if(eS(eT[eV]))eV=eV+1;else eU=false;return eU;}
function c5(eS){ let eT=null;let eU=0;const eV=eS.textContent;const eW=new RegExp(R(), "g");while(eT=eW.exec(eV),eT!==null){ eS.parentNode.insertBefore(globalThis.document.createTextNode(db(eV, b7(eU), b7(eW.lastIndex-b2(eT, 0).length-1))), eS);eU=eW.lastIndex;const eX=globalThis.document.createElement("span");eX.setAttribute("ws-replace", b2(eT, 1).toLowerCase());eS.parentNode.insertBefore(eX, eS);} eW.lastIndex=0;eS.textContent=db(eV, b7(eU), null);}
function c6(eS){ console.warn("Instantiating non-loaded template", eS);}
function c7(eS, eT, eU){ const eV=eS.querySelector("[ws-replace]");return u0033(eV, null)?(console.warn("Filling non-existent text hole", eU),null):(eV.parentNode.replaceChild(globalThis.document.createTextNode(eT), eV),b7(eV.getAttribute("ws-replace")));}
function c8(eS, eT){ const eU=(eV) => { P(eS, "["+eV+"]", (eW) => { if(!eT.Contains(eW.getAttribute(eV)))eW.removeAttribute(eV);});};eU("ws-attr");eU("ws-onafterrender");eU("ws-var");P(eS, "[ws-hole]", (eV) => { if(!eT.Contains(eV.getAttribute("ws-hole"))){ eV.removeAttribute("ws-hole");while(eV.hasChildNodes())eV.removeChild(eV.lastChild);} });P(eS, "[ws-replace]", (eV) => { if(!eT.Contains(eV.getAttribute("ws-replace")))eV.parentNode.removeChild(eV);});P(eS, "[ws-on]", (eV) => { eV.setAttribute("ws-on", dv(" ", cT((eW) => eT.Contains(b2(dw(eW, [":"], 1), 1)), dw(eV.getAttribute("ws-on"), [" "], 1))));});P(eS, "[ws-attr-holes]", (eV) => { const eW=dw(eV.getAttribute("ws-attr-holes"), [" "], 1);for(let e0=0, e1=eW.length-1;e0<=e1;e0++){ const eX=b2(eW, e0);let eY=new RegExp(R(), "g");let eZ=eV.getAttribute(eX).replace(eY, (e2, e3) => eT.Contains(e3)?e2:"");eV.setAttribute(eX, eZ);} });}
function c9(eS, eT){ da(eT);const eU=eT.nodeName.toLowerCase();const eV=eS.querySelector("[ws-attr="+eU+"]");if(u0033(eV, null))console.warn("Filling non-existent attr hole", eU);else { eV.removeAttribute("ws-attr");for(let eX=0, eY=eT.attributes.length-1;eX<=eY;eX++){ const eW=eT.attributes.item(eX);if(eW.name=="class"&&eV.hasAttribute("class"))eV.setAttribute("class", eV.getAttribute("class")+" "+eW.nodeValue);else eV.setAttribute(eW.name, eW.nodeValue);} } }
function c_(eS, eT){ const eU=(eV) => { P(eS, "["+eV+"]", (eW) => { let eX;const eY=(eX=null,[eT.TryGetValue(eW.getAttribute(eV).toLowerCase(), {get:() => eX, set:(eZ) => { eX=eZ;}}), eX]);if(eY[0])eW.setAttribute(eV, eY[1]);});};eU("ws-hole");eU("ws-replace");eU("ws-attr");eU("ws-onafterrender");eU("ws-var");P(eS, "[ws-on]", (eV) => { eV.setAttribute("ws-on", dv(" ", cU((eW) => { let eX;const eY=dw(eW, [":"], 1);const eZ=(eX=null,[eT.TryGetValue(b2(eY, 1), {get:() => eX, set:(e0) => { eX=e0;}}), eX]);return eZ[0]?b2(eY, 0)+":"+eZ[1]:eW;}, dw(eV.getAttribute("ws-on"), [" "], 1))));});P(eS, "[ws-attr-holes]", (eV) => { const eW=dw(eV.getAttribute("ws-attr-holes"), [" "], 1);for(let eX=0, eY=eW.length-1;eX<=eY;eX++)((() => { const eZ=b2(eW, eX);return eV.setAttribute(eZ, bI((e0, e1) => { const e2=f(e1);return e0.replace(new RegExp("\\${"+e2[0]+"}", "ig"), "${"+e2[1]+"}");}, eV.getAttribute(eZ), eT));})());});}
function c$(eS, eT, eU){ while(true){ if(eS.hasChildNodes())eU=eT.insertBefore(eS.lastChild, eU);else return null;} }
function da(eS){ const eT=eS.attributes;const eU=[];const eV=[];const eW=[];for(let e1=0, e2=eT.length-1;e1<=e2;e1++){ const eX=eT.item(e1);if(dx(eX.nodeName, "ws-on")&&eX.nodeName!="ws-onafterrender"&&eX.nodeName!="ws-on"){ eU.push(eX.nodeName);eV.push(db(eX.nodeName, b7("ws-on".length), null)+":"+eX.nodeValue.toLowerCase());} else if(!dx(eX.nodeName, "ws-")&&(new RegExp(R())).test(eX.nodeValue)){ let eY=new RegExp(R(), "g");let eZ=eX.nodeValue.replace(eY, (e3, e4) =>"${"+e4.toLowerCase()+"}");eX.nodeValue=eZ;eW.push(eX.nodeName);} else void 0;} if(!(eV.length==0))eS.setAttribute("ws-on", dv(" ", eV));if(!(eW.length==0))eS.setAttribute("ws-attr-holes", dv(" ", eW));const e0=(e3) => { const e4=eS.getAttribute(e3);if(e4==null){ } else eS.setAttribute(e3, e4.toLowerCase());};e0("ws-hole");e0("ws-replace");e0("ws-attr");e0("ws-onafterrender");e0("ws-var");cV((e3) => { eS.removeAttribute(e3);}, eU);}
function db(eS, eT, eU){ if(eT==null){ if(eU!=null&&eU.$==1){ const eV=eU.$0;return eV<0?"":eS.slice(0, eV+1);} else return"";} else if(eU==null)return eS.slice(eT.$0);else { const eW=eU.$0;return eW<0?"":eS.slice(eT.$0, eW+1);} }
function dc(){ return e("The input sequence has an insufficient number of elements.");}
function dd(eS, eT){ let eU=true;let eV=0;while(eU&&eV<b3(eT))if(u0033(eT[eV], eS))eU=false;else eV=eV+1;return!eU;}
function de(){ return e("The input must be non-negative.");}
class df extends c { d;GetEnumerator(){ return cp(bL((eS) => eS.K, this.d));} constructor(eS){ super();this.d=eS;} }
class dg { Attr;Children;Delimiters;El;ElKey;Render;Equals(eS){ return this.ElKey===eS.ElKey;} GetHashCode(){ return this.ElKey;} static New(eS, eT, eU, eV, eW, eX){ const eY={Attr:eS, Children:eT, El:eV, ElKey:eW};let eZ=(eQ(eY, "Delimiters", eU),eQ(eY, "Render", eX),eY);return eO(dg, eZ);} }
function dh(){ return dX();}
function di(eS){ const eT=null;return dM(() => dN(dk(() => { }, dY(eS)), () => { dZ(eS);return dQ(null);}));}
function dj(eS, eT){ return dl(eb(eS.$0, eT.$0));}
function dk(eS, eT){ const eU=eT.Duration;if(eU===0)return dO();else { const eV=(eW) => { function eX(eY){ return(eZ) => { const e0=eZ-eY;eT.Compute(e0);eS();return e0<=eU?void requestAnimationFrame((e1) => {(eX(eY))(e1);}):eW();};} requestAnimationFrame((eY) => {(eX(eY))(eY);});};return dV((eW, eX, eY) => eV.apply(null, [eW, eX, eY]));} }
function dl(eS){ return{$:0, $0:eS};}
function dm(eS){ return dl(ed(bL(d1, eS)));}
function dn(){ return dl(ee());}
function do_1(){ return d5.BatchUpdatesEnabled;}
function dp(eS){ const eT=[0];function eU(){ const eV=null;return dM(() => dN(eS, () => { const eW=eT[0];return u0033(eW, 1)?(eT[0]=0,dO()):u0033(eW, 2)?(eT[0]=1,eU()):dO();}));} return() => { const eV=eT[0];if(u0033(eV, 0)){ eT[0]=1;dP(eU(), null);} else u0033(eV, 1)?eT[0]=2:void 0;};}
class dq extends S { docNode_1;updates_1;elt;rvUpdates;static New(eS, eT, eU){ const eV=cf(eS, eT, eU.docNode);const eW=d6.Create(eU.updates);return new dq(bE(eV), n(bf(eV.Attr), eW.v), eS, eW);} constructor(eS, eT, eU, eV){ super(eS, eT);this.docNode_1=eS;this.updates_1=eT;this.elt=eU;this.rvUpdates=eV;} }
function dr(eS){ if(eS instanceof Array)return eS;else if(eS instanceof d7)return cX(eS);else if(eS===null)return[];else { const eT=[];const eU=cp(eS);try { while(eU.MoveNext())eT.push(eU.Current);return eT;} finally { if(typeof eU=="object"&&a(eU))eU.Dispose();} } }
function ds(eS, eT, eU){ const eV=b3(eU);function eW(eX){ return(eY) => { let eZ;switch(eY<=0?0:eY===1?eX>=0&&eX<eV?1:(eZ=eY,2):(eZ=eY,2)){ case 0:return eS;case 1:return b2(eU, eX);case 2:const e0=eY/2>>0;return eT((eW(eX))(e0), (eW(eX+e0))(eY-e0));} };} return(eW(0))(eV);}
function dt(eS, eT, eU, eV){ const eW=b3(eV);function eX(eY){ return(eZ) => { let e0;switch(eZ<=0?0:eZ===1?eY>=0&&eY<eW?1:(e0=eZ,2):(e0=eZ,2)){ case 0:return eT;case 1:return eS(b2(eV, eY));case 2:const e1=eZ/2>>0;return eU((eX(eY))(e1), (eX(eY+e1))(eZ-e1));} };} return(eX(0))(eW);}
let du=eN((eS) => class eT { static { du=eS(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(e_) =>[(e$) => { e$.addEventListener("change", () => e_.Get()!=e$.checked?e_.Set(e$.checked):null);}, (e$) =>(fa) => fa!=null&&fa.$==1?void(e$.checked=fa.$0):null, l(b7, e_.View)];this.StringSet=(e_) =>(e$) => { e_.value=e$;};this.StringGet=(e_) => b7(e_.value);const eU=cx();const eV=cw();this.StringApply=(e_) => cv(eU, eV, e_);this.StringListSet=(e_) =>(e$) => { const fa=e_.options;for(let fb=0, fc=fa.length-1;fb<=fc;fb++)((() => { const fd=fa.item(fb);fd.selected=dd(fd.value, e$);})());};this.StringListGet=(e_) => { const e$=e_.selectedOptions;return b7(cZ(bJ(() => bK((fa) =>[e$.item(fa).value], g(0, e$.length-1)))));};const eW=cz();const eX=cy();this.StringListApply=(e_) => cv(eW, eX, e_);this.DateTimeSetUnchecked=(e_) =>(e$) => { e_.value=(new Date(e$)).toLocaleString();};this.DateTimeGetUnchecked=(e_) => { let e$;let fa;const fb=e_.value;if(d8(fb))return b7(-8640000000000000);else { e$=0;const fc=ej(fb);let fd=fc!=null&&fc.$==1&&(e$=fc.$0,true);fa=[fd, e$];return fa[0]?b7(fa[1]):null;} };const eY=cB();const eZ=cA();this.DateTimeApplyUnchecked=(e_) => cv(eY, eZ, e_);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(e_) => { const e$=e_.files;return b7(cZ(bJ(() => bL((fa) => e$.item(fa), g(0, e$.length-1)))));};const e0=cE();const e1=cD();this.FileApplyUnchecked=(e_) => cC(e0, e1, e_);this.IntSetUnchecked=(e_) =>(e$) => { e_.value=String(e$);};this.IntGetUnchecked=(e_) => { const e$=e_.value;if(d8(e$))return b7(0);else { const fa=+e$;return fa!==fa>>0?null:b7(fa);} };const e2=cG();const e3=cF();this.IntApplyUnchecked=(e_) => cv(e2, e3, e_);this.IntSetChecked=(e_) =>(e$) => { const fa=e$.Input;return e_.value!=fa?void(e_.value=fa):null;};this.IntGetChecked=(e_) => { let e$;let fa;const fb=e_.value;if(d8(fb))e$=(e_.checkValidity?e_.checkValidity():true)?d9.Blank(fb):d9.Invalid(fb);else { const fc=(fa=0,[b0(fb, {get:() => fa, set:(fd) => { fa=fd;}}), fa]);e$=fc[0]?d9.Valid(fc[1], fb):d9.Invalid(fb);} return b7(e$);};const e4=cI();const e5=cH();this.IntApplyChecked=(e_) => cv(e4, e5, e_);this.FloatSetUnchecked=(e_) =>(e$) => { e_.value=String(e$);};this.FloatGetUnchecked=(e_) => { const e$=e_.value;if(d8(e$))return b7(0);else { const fa=+e$;return isNaN(fa)?null:b7(fa);} };const e6=cK();const e7=cJ();this.FloatApplyUnchecked=(e_) => cv(e6, e7, e_);this.FloatSetChecked=(e_) =>(e$) => { const fa=e$.Input;return e_.value!=fa?void(e_.value=fa):null;};this.FloatGetChecked=(e_) => { let e$;const fa=e_.value;if(d8(fa))e$=(e_.checkValidity?e_.checkValidity():true)?d9.Blank(fa):d9.Invalid(fa);else { const fb=+fa;e$=isNaN(fb)?d9.Invalid(fa):d9.Valid(fb, fa);} return b7(e$);};const e8=cM();const e9=cL();this.FloatApplyChecked=(e_) => cv(e8, e9, e_);} });
function dv(eS, eT){ return cZ(eT).join(eS);}
function dw(eS, eT, eU){ return dy(eS, new RegExp("["+dz(eT.join(""))+"]"), eU);}
function dx(eS, eT){ return eS.substring(0, eT.length)==eT;}
function dy(eS, eT, eU){ return eU===1?cT((eV) => eV!=="", dB(eS, eT)):dB(eS, eT);}
function dz(eS){ return eS.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function dA(eS, eT){ return bR(eS, dC(eT));}
function dB(eS, eT){ return eS.split(eT);}
function dC(eS){ return eS==null?"":eS;}
function dD(eS, eT, eU, eV){ const eW={DynElem:eS, DynFlags:eT, DynNodes:eU};eQ(eW, "OnAfterRender", eV);return eW;}
function dE(eS, eT){ return{PreviousNodes:eS, Top:eT};}
function dF(){ return dH(new b6("New_3"));}
function dG(eS){ const eT=[];function eU(eX, eY){ while(true)switch(eX){ case 0:if(eY!=null&&eY.$==0){ const eZ=eY.$1;const e0=eY.$0;eU(0, e0);eY=eZ;} else if(eY!=null&&eY.$==1){ const e1=eY.$0;eY=e1;eX=1;} else if(eY!=null&&eY.$==2){ const e2=eY.$0;eY=e2.Current;} else if(eY!=null&&eY.$==6){ const e3=eY.$0.Holes;return(((e4) =>(e5) => { cV(e4, e5);})(eW))(e3);} else return null;break;case 1:eT.push(eY);eY=eY.Children;eX=0;break;} } function eV(eX){ return eU(0, eX);} function eW(eX){ return eU(1, eX);} eV(eS);return dH(new b6("New_2", eT));}
function dH(eS){ return{$:0, $0:eS};}
function dI(eS, eT){ return dH(ew(eS, eT.$0));}
function dJ(eS, eT){ return dH(ex(eS.$0, eT.$0));}
function dK(eS){ return ey(eS.$0);}
function dL(eS, eT){ return dH(ez(eS.$0, eT.$0));}
function dM(eS){ return(eT) => { try {(eS())(eT);} catch(eU){ eT.k(er(eU));} };}
function dN(eS, eT){ return dS((eU) => { eS(eq((eV) => { if(eV.$==0){ const eW=eV.$0;dR().Fork(() => { try {(eT(eW))(eU);} catch(eX){ eU.k(er(eX));} });} else dR().Fork(() => { eU.k(eV);});}, eU.ct));});}
function dO(){ return eu.Zero;}
function dP(eS, eT){ const eU=(dT())[0];const eV=eT==null?eU:eT.$0;dR().Fork(() => { if(!eV.c)eS(eq((eW) => { if(eW.$==1)dU(eW.$0);}, eV));});}
function dQ(eS){ return(eT) => { eT.k(es(eS));};}
function dR(){ return eu.scheduler;}
function dS(eS){ return(eT) => { if(eT.ct.c)dW(eT);else eS(eT);};}
function dT(){ return eu.defCTS;}
function dU(eS){ console.log("WebSharper: Uncaught asynchronous exception", eS);}
function dV(eS){ return(eT) => { const eU=[false];const eV=(eW) => { if(eU[0])e("A continuation provided by Async.FromContinuations was invoked multiple times");else { eU[0]=true;dR().Fork(eW);} };eS((eW) => { eV(() => { eT.k(es(eW));});}, (eW) => { eV(() => { eT.k(er(eW));});}, (eW) => { eV(() => { eT.k(et(eW));});});};}
function dW(eS){ eS.k(et(new eG("New", eS.ct)));}
function dX(){ return ea.UseAnimations;}
function dY(eS){ return d0(c1((eT) => eT.$==1?b7(eT.$0):null, ec(eS.$0)));}
function dZ(eS){ cV((eT) => { if(eT.$==0)eT.$0();}, ec(eS.$0));}
function d0(eS){ const eT=dr(eS);const eU=b3(eT);if(eU===0)return d2();else if(eU===1)return b2(eT, 0);else { const eV=bS(bL((eX) => eX.Duration, eT));const eW=cU((eX) => d4(eV, eX), eT);return d3(eV, (eX) => { cV((eY) => { eY.Compute(eX);}, eW);});} }
function d1(eS){ return eS.$0;}
function d2(eS){ return d3(0, () => eS);}
function d3(eS, eT){ return{Compute:eT, Duration:eS};}
function d4(eS, eT){ const eU=eT.Compute;const eV=eT.Duration;const eW=eH(() => eT.Compute(eT.Duration));return{Compute:(eX) => eX>=eV?eW.f():eU(eX), Duration:eS};}
let d5=eN((eS) => class eT { static { d5=eS(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
class d6 { c;s;v;static Create(eS){ let eT;eT=null;eT=d6.New(eS, null, () => { let eU;eU=eT.s;return eU===null?(eU=C(eT.c()),eT.s=eU,r(eU, () => { eT.s=null;}),eU):eU;});return eT;} static New(eS, eT, eU){ return eO(d6, {c:eS, s:eT, v:eU});} }
class d7 { GetEnumerator(){ return new ct(this, null, (eS) => { const eT=eS.s;return eT.$==0?false:(eS.c=eT.$0,eS.s=eT.$1,true);}, void 0);} }
function d8(eS){ return dA(ei, eS);}
class d9 { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(eS){ return eO(d9, {$:2, $0:eS});} static Invalid(eS){ return eO(d9, {$:1, $0:eS});} static Valid(eS, eT){ return eO(d9, {$:0, $0:eS, $1:eT});} }
function d_(eS){ eS.splice(0, b3(eS));}
let d$=eN((eS) => class eT { static { d$=eS(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const eU=[1, "<table>", "</table>"];let eV=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", eU], ["tbody", eU], ["tfoot", eU], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=eV;this.defaultWrap=[0, "", ""];} });
let ea=eN((eS) => class eT { static { ea=eS(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=ep.Custom((eU) => { const eV=eU*eU;return 3*eV-2*(eV*eU);});this.UseAnimations=true;} });
function eb(eS, eT){ return eS.$==0?eT:eT.$==0?eS:{$:2, $0:eS, $1:eT};}
function ec(eS){ const eT=[];function eU(eV){ while(true){ if(eV.$==1)return eT.push(eV.$0);else if(eV.$==2){ const eW=eV.$1;const eX=eV.$0;eU(eX);eV=eW;} else return eV.$==3?cV((eY) => { eT.push(eY);}, eV.$0):null;} } eU(eS);return eT.slice(0);}
function ed(eS){ const eT=dr(eS);return ds(ee(), eb, eT);}
function ee(){ return eK.Empty;}
function ef(eS){ return eS.$==1?eS.$0:eh();}
function eg(eS){ return eS.$==1?eS.$1:eh();}
function eh(){ return e("The input list was empty.");}
function ei(eS){ return eS.match(new RegExp("\\s"))!==null;}
function ej(eS){ const eT=Date.parse(eS);return isNaN(eT)?null:b7(eT);}
function ek(eS, eT, eU, eV){ const eW=+eS;const eX=eW===eW-eW%1&&eW>=eT&&eW<=eU;if(eX)eV.set(eW);return eX;}
class el extends c { push;value;dirty;updates;get NChanged(){ return this.updates;} NGetExitAnim(eS){ return dn();} NGetEnterAnim(eS){ return dn();} NGetChangeAnim(eS){ return dn();} NSync(eS){ if(this.dirty){(this.push(eS))(this.value);this.dirty=false;} } constructor(eS, eT){ super();this.push=eT;this.value=void 0;this.dirty=false;this.updates=l((eU) => { this.value=eU;this.dirty=true;}, eS);} }
function em(eS){ let eT=[];let eU;for(var eV in eS)eT.push.apply(eT, eS[eV]);return eT;}
class en extends Error { static New(){ return new this("New");} static New_1(eS){ return new this("New_1", eS);} constructor(eS, eT){ if(eS=="New"){ eS="New_1";eT="The given key was not present in the dictionary.";} if(eS=="New_1"){ const eU=eT;super(eU);} } }
class eo extends c { idle;robin;Fork(eS){ this.robin.push(eS);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const eS=Date.now();let eT=true;while(eT)if(this.robin.length===0){ this.idle=true;eT=false;} else {(this.robin.shift())();Date.now()-eS>40?(setTimeout(() => { this.tick();}, 0),eT=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class ep extends c { transformTime;static Custom(eS){ return new ep(eS);} constructor(eS){ super();this.transformTime=eS;} }
function eq(eS, eT){ return{k:eS, ct:eT};}
function er(eS){ return{$:1, $0:eS};}
function es(eS){ return{$:0, $0:eS};}
function et(eS){ return{$:2, $0:eS};}
let eu=eN((eS) => class eT { static { eu=eS(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=ev(false, []);this.scheduler=new eo();this.defCTS=[new eA()];this.Zero=dQ();this.GetCT=(eU) => { eU.k(es(eU.ct));};} });
function ev(eS, eT){ return{c:eS, r:eT};}
function ew(eS, eT){ return new b6("New_2", cT(eS, ey(eT)));}
function ex(eS, eT){ const eU=new b6("New_2", ey(eT));eU.ExceptWith(ey(eS));return eU;}
function ey(eS){ const eT=c2(eS.Count, void 0);eS.CopyTo(eT, 0);return eT;}
function ez(eS, eT){ const eU=new b6("New_2", ey(eS));eU.IntersectWith(ey(eT));return eU;}
class eA extends c { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
function eB(eS, eT){ let eU;if(eT!=null&&eT.$==1){ const eV=[];eU=eT.$0[0].nextSibling;while(eU!==eT.$0[1]){ eV.push(eU);eU=eU.nextSibling;} return eF(eV);} else { let eW=eS.childNodes.length;const eX=eS.childNodes;let eY=c3(eW, (eZ) => eX[eZ]);return eF(eY);} }
function eC(eS, eT){ const eU=eS.$0;return eF(cT((eV) => c4((eW) =>!(eV===eW), eU), eT.$0));}
function eD(eS, eT){ cV(eS, eT.$0);}
function eE(eS){ const eT=[];function eU(eV){ while(true){ if(eV!=null&&eV.$==2){ const eW=eV.$0;eV=eW.Current;} else if(eV!=null&&eV.$==1)return eT.push(eV.$0.El);else if(eV==null)return null;else if(eV!=null&&eV.$==5)return eT.push(eV.$0);else if(eV!=null&&eV.$==4)return eT.push(eV.$0.Text);else if(eV!=null&&eV.$==6){ const eX=eV.$0.Els;return(((e0) =>(e1) => { cV(e0, e1);})((e0) => { if(e0==null||e0.constructor===Object)eU(e0);else eT.push(e0);}))(eX);} else { const eY=eV.$1;const eZ=eV.$0;eU(eZ);eV=eY;} } } eU(eS.Children);return eF(dr(eT));}
function eF(eS){ return{$:0, $0:eS};}
class eG extends Error { ct;static New(eS){ return new this("New", eS);} static New_1(eS, eT, eU){ return new this("New_1", eS, eT, eU);} constructor(eS, eT, eU, eV){ let eW;if(eS=="New"){ eW=eT;eS="New_1";eT="The operation was canceled.";eU=null;eV=eW;} if(eS=="New_1"){ const eX=eT;const eY=eU;const eZ=eV;super(eX);this.inner=eY;this.ct=eZ;} } }
function eH(eS){ return eL(false, eS, eI);}
function eI(){ const eS=this.v();this.c=true;this.v=eS;this.f=eJ;return eS;}
function eJ(){ return this.v;}
let eK=eN((eS) => class eT { static { eK=eS(this);} static Empty;static { this.Empty={$:0};} });
function eL(eS, eT, eU){ return{c:eS, v:eT, f:eU};}
eR(() => { b();});
eM();

