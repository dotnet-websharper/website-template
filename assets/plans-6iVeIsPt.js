import{A as j}from"./main-DwOcRg7A.js";const b="ws.planprices.v1",n={pro:{},freelancer:{}};let h=null,C=null;function N(t){for(const s of t){const l=(s.code||"").toLowerCase();n[l]||(n[l]={}),n[l][s.interval]=s,!n[l].name&&s.name&&(n[l].name=s.name),!n[l].description&&s.description&&(n[l].description=s.description)}const r=n.pro?.month?.unitAmountCents,c=n.pro?.year?.unitAmountCents;h&&r!=null&&(h.dataset.priceMonth=String(r/100)),h&&c!=null&&(h.dataset.priceYear=String(c/100));const o=n.freelancer?.month?.unitAmountCents,d=n.freelancer?.year?.unitAmountCents;C&&o!=null&&(C.dataset.priceMonth=String(o/100)),C&&d!=null&&(C.dataset.priceYear=String(d/100))}function B(){try{const t=sessionStorage.getItem(b);if(!t)return null;const r=JSON.parse(t);return!r||!Array.isArray(r.items)?null:r.items}catch{return null}}function J(t){try{sessionStorage.setItem(b,JSON.stringify({items:t}))}catch{}}async function O(){const t=B();if(t)return N(t),{items:t,fromCache:!0};try{const r=await fetch(`${j}/plans/prices`,{headers:{Accept:"application/json"},credentials:"include"});if(!r.ok)throw new Error(`HTTP ${r.status}`);const c=await r.json(),o=Array.isArray(c?.items)?c.items:[];return N(o),J(o),{items:o,fromCache:!1}}catch(r){return console.warn("[plans] Failed to fetch prices, using fallback attributes:",r),{items:[],fromCache:!1,error:r}}}function K(){const t=(e,a=document)=>a.querySelector(e),r=e=>Number.parseInt(e,10)||0,c=t("#wsBillMonth"),o=t("#wsBillYear"),d=t("#wsProCard"),s=t("#wsFreeCard");if(!d||!s||!c||!o)return;h=d,C=s;const l=t("#wsProName"),E=t("#wsFreeName"),T=t("#wsProPriceText"),P=t("#wsFreePriceText"),S=t("#wsProTotalLabel"),v=t("#wsFreeTotalLabel"),F=t("#wsProTotal"),Y=t("#wsFreeTotal"),A=t("#wsSeatsMinus"),k=t("#wsSeatsPlus"),p=t("#wsSeatCount"),M=t("#wsProCheckout"),$=t("#wsFreeCheckout"),g=t("#wsProNote"),w=t("#wsFreeNote");if(!M||!$||!A||!k||!p)return;let i="year";const m=e=>`$${e.toLocaleString("en-US")}`,y=(e,a)=>{e.dataset.active=String(a),e.setAttribute("aria-pressed",String(a))},x=e=>Math.max(1,Math.min(999,e|0));function L(e){return n?.[e]?.[i]?.currency||n?.[e]?.month?.currency||n?.[e]?.year?.currency||"usd"}function I(){const e=n.pro?.[i]?.unitAmountCents,a=n.freelancer?.[i]?.unitAmountCents,u=e!=null?e/100:r(d.dataset[i==="month"?"priceMonth":"priceYear"]),U=a!=null?a/100:r(s.dataset[i==="month"?"priceMonth":"priceYear"]);return{pro:u,fr:U}}function H(){const e=L("pro").toUpperCase(),a=L("freelancer").toUpperCase();if(g){const u=n.pro?.description||g.textContent||"Ideal for teams";g.textContent=`${u}. Prices in ${e}.`}if(w){const u=n.freelancer?.description||w.textContent||"Ideal for solo developers";w.textContent=`${u}. Prices in ${a}.`}}function f(){const{pro:e,fr:a}=I(),u=x(r(p.value)||1);n.pro?.name&&(l.textContent=n.pro.name),n.freelancer?.name&&(E.textContent=n.freelancer.name),i==="month"?(T.innerHTML=`${m(e)} <span class="text-gray-600 dark:text-gray-400">/ seat / month</span>`,P.innerHTML=`${m(a)} <span class="text-gray-600 dark:text-gray-400">/ month</span>`,S.textContent="Total (monthly)",v.textContent="Total (monthly)"):(T.innerHTML=`${m(e)} <span class="text-gray-600 dark:text-gray-400">/ seat / year</span>`,P.innerHTML=`${m(a)} <span class="text-gray-600 dark:text-gray-400">/ year</span>`,S.textContent="Total (yearly)",v.textContent="Total (yearly)"),F.textContent=m(e*u),Y.textContent=m(a),M.href=`./checkout.html?plan=pro&interval=${i}&seats=${u}`,$.href=`./checkout.html?plan=freelancer&interval=${i}&seats=1`,H()}c.addEventListener("click",()=>{i="month",y(c,!0),y(o,!1),f()}),o.addEventListener("click",()=>{i="year",y(c,!1),y(o,!0),f()}),A.addEventListener("click",()=>{p.value=String(x((r(p.value)||1)-1)),f()}),k.addEventListener("click",()=>{p.value=String(x((r(p.value)||1)+1)),f()}),p.addEventListener("input",f),f(),O().finally(f),console.log("catalog",n)}export{n as c,O as h,K as i};
