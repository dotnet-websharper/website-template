import{A as O}from"./main-DyUGKaRG.js";function J({pricePerSeat:n=2500}={}){if(document.querySelector("#wsProCard"))return;const o=c=>`$${c.toLocaleString("en-US")}`,a=document.getElementById("wsSeatCount"),f=document.getElementById("wsSeatsMinus"),d=document.getElementById("wsSeatsPlus"),m=document.getElementById("wsTotal"),i=document.getElementById("wsGoCheckout");if(!a||!f||!d||!m||!i)return;const l=c=>Math.max(1,Math.min(999,c|0));function u(c){const w=l(c);a.value=w,m.textContent=o(w*n),i.href=`./checkout.html?seats=${w}`}f.addEventListener("click",()=>u(+a.value-1)),d.addEventListener("click",()=>u(+a.value+1)),a.addEventListener("input",()=>u(parseInt(a.value||"1",10))),u(+a.value||1)}function V(n="https://api.intellifactory.com/api/contact"){const o=document.getElementById("contactForm"),a=document.getElementById("contact-form-button");if(!o||!a)return;const f=i=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),d=i=>{const l=i.emailMessage.value.trim(),u=i.emailAddress.value.trim(),c=i.emailName.value.trim();return l&&u&&c&&f(u)},m=()=>{a.disabled=!d(o)};m(),o.addEventListener("input",m),o.addEventListener("submit",async i=>{if(i.preventDefault(),!d(o)){alert("Please fill in all required fields.");return}const l=new FormData;l.append("subject",o.emailSubject.value.trim()),l.append("message",o.emailMessage.value.trim()),l.append("email",o.emailAddress.value.trim()),l.append("name",o.emailName.value.trim()),l.append("country",o.emailCountry.value),a.disabled=!0;const u=a.textContent;a.textContent="Sending...";try{if(!(await fetch(n,{method:"POST",body:l})).ok)throw new Error("Server error");alert("Message sent successfully!"),o.reset(),a.disabled=!0}catch(c){console.error(c),alert("Failed to send message. Please try again later."),o.reset(),a.disabled=!0}finally{a.textContent=u}})}function z(){const n=(e,t=document)=>t.querySelector(e),o=e=>Number.parseInt(e,10)||0,a=n("#wsBillMonth"),f=n("#wsBillYear"),d=n("#wsProCard"),m=n("#wsFreeCard");if(!d||!m||!a||!f)return;const i=n("#wsProName"),l=n("#wsFreeName"),u=n("#wsProPriceText"),c=n("#wsFreePriceText"),w=n("#wsProTotalLabel"),L=n("#wsFreeTotalLabel"),B=n("#wsProTotal"),Y=n("#wsFreeTotal"),M=n("#wsSeatsMinus"),k=n("#wsSeatsPlus"),h=n("#wsSeatCount"),A=n("#wsProCheckout"),$=n("#wsFreeCheckout"),P=n("#wsProNote"),T=n("#wsFreeNote");if(!A||!$||!M||!k||!h)return;let p="year";const b="ws.planprices.v1",r={pro:{},freelancer:{}},S=e=>`$${e.toLocaleString("en-US")}`,x=(e,t)=>{e.dataset.active=String(t),e.setAttribute("aria-pressed",String(t))},E=e=>Math.max(1,Math.min(999,e|0));function F(e){return r?.[e]?.[p]?.currency||r?.[e]?.month?.currency||r?.[e]?.year?.currency||"usd"}function H(){const e=r.pro?.[p]?.unitAmountCents,t=r.freelancer?.[p]?.unitAmountCents,s=e!=null?e/100:o(d.dataset[p==="month"?"priceMonth":"priceYear"]),C=t!=null?t/100:o(m.dataset[p==="month"?"priceMonth":"priceYear"]);return{pro:s,fr:C}}function U(){const e=F("pro").toUpperCase(),t=F("freelancer").toUpperCase();if(P){const s=r.pro?.description||P.textContent||"Ideal for teams";P.textContent=`${s}. Prices in ${e}.`}if(T){const s=r.freelancer?.description||T.textContent||"Ideal for solo developers";T.textContent=`${s}. Prices in ${t}.`}}function y(){const{pro:e,fr:t}=H(),s=E(o(h.value)||1);r.pro?.name&&(i.textContent=r.pro.name),r.freelancer?.name&&(l.textContent=r.freelancer.name),p==="month"?(u.innerHTML=`${S(e)} <span class="text-gray-600 dark:text-gray-400">/ seat / month</span>`,c.innerHTML=`${S(t)} <span class="text-gray-600 dark:text-gray-400">/ month</span>`,w.textContent="Total (monthly)",L.textContent="Total (monthly)"):(u.innerHTML=`${S(e)} <span class="text-gray-600 dark:text-gray-400">/ seat / year</span>`,c.innerHTML=`${S(t)} <span class="text-gray-600 dark:text-gray-400">/ year</span>`,w.textContent="Total (yearly)",L.textContent="Total (yearly)"),B.textContent=S(e*s),Y.textContent=S(t),A.href=`./checkout.html?plan=pro&interval=${p}&seats=${s}`,$.href=`./checkout.html?plan=freelancer&interval=${p}&seats=1`,U()}function I(e){for(const g of e){const v=(g.code||"").toLowerCase();r[v]||(r[v]={}),r[v][g.interval]=g,!r[v].name&&g.name&&(r[v].name=g.name),!r[v].description&&g.description&&(r[v].description=g.description)}const t=r.pro?.month?.unitAmountCents,s=r.pro?.year?.unitAmountCents;t!=null&&(d.dataset.priceMonth=String(t/100)),s!=null&&(d.dataset.priceYear=String(s/100));const C=r.freelancer?.month?.unitAmountCents,N=r.freelancer?.year?.unitAmountCents;C!=null&&(m.dataset.priceMonth=String(C/100)),N!=null&&(m.dataset.priceYear=String(N/100))}function j(){try{const e=sessionStorage.getItem(b);if(!e)return null;const t=JSON.parse(e);return!t||!Array.isArray(t.items)?null:t.items}catch{return null}}function q(e){try{sessionStorage.setItem(b,JSON.stringify({items:e}))}catch{}}async function D(){const e=j();if(e){I(e),y();return}try{const t=await fetch(`${O}/plans/prices`,{headers:{Accept:"application/json"},credentials:"include"});if(!t.ok)throw new Error(`HTTP ${t.status}`);const s=await t.json(),C=Array.isArray(s?.items)?s.items:[];I(C),q(C)}catch(t){console.warn("[plans] Failed to fetch prices, using fallback attributes:",t)}finally{y()}}a.addEventListener("click",()=>{p="month",x(a,!0),x(f,!1),y()}),f.addEventListener("click",()=>{p="year",x(a,!1),x(f,!0),y()}),M.addEventListener("click",()=>{h.value=String(E((o(h.value)||1)-1)),y()}),k.addEventListener("click",()=>{h.value=String(E((o(h.value)||1)+1)),y()}),h.addEventListener("input",y),y(),D()}document.addEventListener("DOMContentLoaded",()=>{document.querySelector("#wsProCard")?z():J({pricePerSeat:2500}),V()});
